英文原文：[http://emberjs.com/guides/models/model-lifecycle/](http://emberjs.com/guides/models/model-lifecycle/)

## 模型生命周期


因为模型必须是异步加载和保存的，所以在给定的时间内一条记录就会存在几个不同的可能状态。每一个`DS.Model`的实例都有一系列布尔类型的属性，用来检查记录的当前状态。


* **isLoaded** 适配器已完成从后端读取记录的当前状态
* **isDirty** 记录有本地修改且尚未被适配器保存到后端。包括记录被创建或删除（但尚未保存）
* **isSaving** 记录已被发给适配器，但适配器尚未确认修改已成功保存与否
* **isDeleted** 记录被标记将被删除。当`isDeleted`和`isDirty`同时为真时，记录只是在本地被删除，并没有持久化。`isSaving`为真时，修改正在保存当中。`isDirty`和`isSaving`同时为假时，修改已经保存成功。
* **isError** 适配器报告说无法保存修改到后端。如果服务器端的验证失败时，也会导致记录的`isValid`属性为假。
* **isNew** 记录只是在本地被创建，适配器尚未报告记录是否被成功保存。
* **isValid** 没有客户端验证失败，适配器也没有报告任何服务器端验证失败


另外，你可以定义记录状态发生改变时的事件。比如，你可以在记录加载完之后运行一些代码：

```js
record.on('didLoad', function() {
  console.log("Loaded!");
});
```

有效的事件包括：

* `didLoad`
* `didCreate`
* `didUpdate`
* `didDelete`
* `becameError`
* `becameInvalid`


### 记录的状态

#### 加载中(loading)


记录一般都起始于加载中(loading)这个状态。这意味着 Ember Data尚未从适配器收到任何有关记录的属性值为多少，处于什么样的关系之类的信息。你可以将记录放进模板中，一旦记录加载完成(loaded)，模板就会自动更新。


#### 加载完成(loaded)/干净


一条记录加载完成(loaded)且干净意味着已经从服务器获得了它的属性以及关系的信息。而且本地对记录尚无修改。


#### 脏


脏的状态意味着记录的属性或关系已经被更改，但尚未通过适配器同步到服务器端。


#### 处理中


一条在进行中的记录是指记录被交给适配器，以保存在本地所做的修改。一旦服务器确认修改的记录被成功保存，记录的状态就变成干净（clean）了


#### 无效

如果服务器认为记录的修改无效以至于无法保存，那么这条记录的状态就变成无效（invalid）


#### 错误

如果一条记录因为除无效之外的其他原因无法保存时，它就进入了错误状态。
